<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отправка уведомлений</title>

    <link rel="stylesheet" href="css/main.css">
    <script src="js/functions.js"></script>

</head>
<body>

    <h2>Отправка уведомлений</h2>
    <b>Тестирование отправки push уведомлений</b>.<br> 
    Для отправки сообщений необходимо <a href='javascript:signIn()'>авторизоваться</a><br><br><br>
   

    <div id="main-area" style="background-color: whitesmoke; padding: 20px; display:none;">

        <h4>Отправить сообщение</h4>
        <label for="txt">Текст сообщения</label>
        <input id="txt" type="text"  placeholder="текст сообщения" value="Верховный суд разъяснил, чем угон автомобиля отличается от кражи"/>
        <label for="link">Ссылка</label>
        <input id="link" type="text"  placeholder="ссылка" value="https://rg.ru/2020/03/02/verhovnyj-sud-raziasnil-chem-ugon-avtomobilia-otlichaetsia-ot-krazhi.html"/>

        <label>Токен пользователя или имя топика в виде '/topics/topicName'</label>
        <input id="to" type="text" value='/topics/rgru' placeholder="токен пользователя или /topics/topicName" />
        <button onclick="sendMessageAndGetNotifications(document.getElementById('to').value, document.getElementById('txt').value, document.getElementById('link').value)">Послать сообщение</button>
        <div style="text-align: right;">
            <a href='javascript:signOut()'>Деавторизовать <span id="user-email"></span></a> 
        </div>
    </div> 
    <br><br>



        <div style="background-color: whitesmoke; padding: 20px;">
            <h4>Подписать токен на получение сообщений по топику</h4>
            <div style="display: grid; grid-template-columns:1fr 150px ; column-gap: 10px;">
                <div>
                    <label>токен</label>
                    <input id="token" type="text" value='' placeholder="токен для подписки" />
                </div>
                <div>
                    <label>топик</label>
                    <input id="topic" type="text" value='rgru' placeholder="топик" />
                </div>
            </div>
            <button onclick="subscribeTokenToTopic(document.getElementById('token').value, document.getElementById('topic').value)">Подписать токен</button>
            <button onclick="unsubscribeTokenFromTopic(document.getElementById('token').value, document.getElementById('topic').value)" class="button-outline">Отписать токен</button>
        </div>


        




    <br><br><br>
    
    <h4>Статистика подписки</h4>
    <div id="counters"></div>

    <h4>Отправленные сообщения</h4>
    <div id="messages"></div>
    

<!-- 
    <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase.js"></script>
    <script>
        firebase.initializeApp({
            apiKey: "AIzaSyB1Kb1oqVigcSoVTEb5An0tXgRRygSO6vE",
            authDomain: "rg-push.firebaseapp.com",
            databaseURL: "https://rg-push.firebaseio.com",
            projectId: "rg-push",
            storageBucket: "rg-push.appspot.com",
            messagingSenderId: "666454432034",
            appId: "1:666454432034:web:b2ddca1d2dd1fbbe4dad7b",
            measurementId: "G-RGP6KVRXG5"
        })
    </script>
 -->

    <script src="/__/firebase/7.9.3/firebase.js"></script>
    <script src="/__/firebase/init.js"></script>
    <script src="js/authorization.js"></script>
    <script src="js/messages.js"></script>
    <script>
        _WatchMessages('messages')
    </script>
    <script src="js/counters.js"></script>
    <script>
        _WatchCounters('counters')
    </script>
  

</body>
</html>